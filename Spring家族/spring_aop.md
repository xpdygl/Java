## 配置aop

Aop:Config标签，用于aop的配置，一般写一个就够了  

Aop:aspect ref="MyAdvice"







## 切入点

切入点类似正则表达式，用于匹配方法

可以具体匹配

也可以模糊匹配

```
关键字（修饰符 返回值 包名.方法名|类名.方法名 （参数类型））
```

### 通配符

\*      单个的独立符号  匹配单个包名 单个参数

也可以作为前缀和后缀出现



..   多个的独立符号 常用于简化包名和参数的书写

匹配多级包  匹配当前包及子包

匹配任意数量的参数

```
execution (public User com..)
```



com..  表示匹配com以及下面的子包



## 增强

#### 前置增强

用于数据校验

如果前置增强出现异常 那么目标方法就不会执行

但是最终增强和返回后增强还是会执行，只是目标方法不会执行了。

#### 返回后增强

只有在目标方法执行后没有出现异常才会执行

可以用来对目标方法返回值进行处理

#### 最终增强

类似finally,一定会被执行 

用来释放资源之类的善后功能

#### 异常抛出增强

目标方法出现异常后才会执行

用来处理目标方法的异常



### 环绕增强

around

method = "around"



功能超强 可以替代前置 最终 返回后 异常抛出后增强。



+ 环绕增强可以控制目标方法是否执行 （重点
  + 定义环绕增强时要给参数，如果不设置 其功能就等价于前置增强
+ 可以修改方法参数和返回值      （重点
+ 可以进行目标方法异常处理
+ 可以进行目标方法的资源释放

Before();

object result = pjp.proceed();

After();

pjp.proceed() 调用目标方法执行 如果有参数就在小括号中传递  (传递到目标方法里面，通过这样修改目标方法参数)

 

 修改目标方法的返回值 

result = "王五"

这样设置之后返回值就变成王五了。